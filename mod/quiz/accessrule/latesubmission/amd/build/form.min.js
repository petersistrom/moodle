define("quizaccess_latesubmission/form",["exports","jquery"],(function(_exports,_jquery){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.set_date=_exports.init=_exports.get_date=_exports.calculate_close_date=void 0,_jquery=(obj=_jquery)&&obj.__esModule?obj:{default:obj};const Selectors_timedue="#id_timedue_enabled",Selectors_timeclose="#id_timeclose_enabled",Selectors_timedueselector="select[id^=id_timedue_]";_exports.init=_ref=>{let{lateperiod:lateperiod,holiday:holiday}=_ref,timedue=(0,_jquery.default)(Selectors_timedue);timedue.click((function(){timedue.is(":checked")&&(timeclose.is(":checked")||timeclose.trigger("click"),calculate_close_date(lateperiod,holiday))}));let timeclose=(0,_jquery.default)(Selectors_timeclose);timeclose.click((function(){!timeclose.is(":checked")&&timedue.is(":checked")&&timedue.trigger("click")})),(0,_jquery.default)(Selectors_timedueselector).on("change",(function(){calculate_close_date(lateperiod,holiday)}))};const calculate_close_date=(lateperiod,holiday)=>{let timeduevalue=get_date("timedue"),timeduetimestamp=new Date(timeduevalue.year,timeduevalue.month-1,timeduevalue.day,timeduevalue.hour,timeduevalue.minute,0).getTime(),timeclosetimestamp=timeduetimestamp+1e3*lateperiod,temptimestamp=timeduetimestamp;for(;temptimestamp<timeclosetimestamp;){temptimestamp+=864e5;let day=new Date(temptimestamp).getDay();6!=day&&0!=day||(timeclosetimestamp+=864e5)}holiday.split(",").forEach((element=>{(element*=1e3)>=timeduetimestamp&&element<timeclosetimestamp&&(timeclosetimestamp+=864e5)}));let timeclosedate=new Date(timeclosetimestamp);set_date("timeclose",timeclosedate)};_exports.calculate_close_date=calculate_close_date;const get_date=elementName=>({day:(0,_jquery.default)('[name="'+elementName+'[day]"]').val(),month:(0,_jquery.default)('[name="'+elementName+'[month]"]').val(),year:(0,_jquery.default)('[name="'+elementName+'[year]"]').val(),hour:(0,_jquery.default)('[name="'+elementName+'[hour]"]').val(),minute:(0,_jquery.default)('[name="'+elementName+'[minute]"]').val()});_exports.get_date=get_date;const set_date=(elementName,newvalue)=>{(0,_jquery.default)('[name="'+elementName+'[day]"]').val(newvalue.getDate()),(0,_jquery.default)('[name="'+elementName+'[month]"]').val(newvalue.getMonth()+1),(0,_jquery.default)('[name="'+elementName+'[year]"]').val(newvalue.getFullYear()),(0,_jquery.default)('[name="'+elementName+'[hour]"]').val(newvalue.getHours()),(0,_jquery.default)('[name="'+elementName+'[minute]"]').val(newvalue.getMinutes())};_exports.set_date=set_date}));

//# sourceMappingURL=form.min.js.map